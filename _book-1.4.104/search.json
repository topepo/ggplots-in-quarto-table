[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ggplots-in-quarto-table",
    "section": "",
    "text": "Preface\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(gt)\nlibrary(modeldata)\n\n\nsessioninfo::session_info()\n\n─ Session info ───────────────────────────────────────────────────────────────\n setting  value\n version  R version 4.3.1 (2023-06-16)\n os       macOS Monterey 12.7.1\n system   x86_64, darwin20\n ui       X11\n language (EN)\n collate  en_US.UTF-8\n ctype    en_US.UTF-8\n tz       America/New_York\n date     2023-11-27\n pandoc   3.1.1 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/ (via rmarkdown)\n\n─ Packages ───────────────────────────────────────────────────────────────────\n package     * version    date (UTC) lib source\n cli           3.6.1      2023-03-23 [1] CRAN (R 4.3.0)\n colorspace    2.1-0      2023-01-23 [1] CRAN (R 4.3.0)\n digest        0.6.33     2023-07-07 [1] CRAN (R 4.3.0)\n dplyr       * 1.1.3      2023-09-03 [1] CRAN (R 4.3.0)\n evaluate      0.23       2023-11-01 [1] CRAN (R 4.3.0)\n fansi         1.0.5      2023-10-08 [1] CRAN (R 4.3.0)\n fastmap       1.1.1      2023-02-24 [1] CRAN (R 4.3.0)\n forcats     * 1.0.0      2023-01-29 [1] CRAN (R 4.3.0)\n generics      0.1.3      2022-07-05 [1] CRAN (R 4.3.0)\n ggplot2     * 3.4.4      2023-10-12 [1] CRAN (R 4.3.0)\n glue          1.6.2      2022-02-24 [1] CRAN (R 4.3.0)\n gt          * 0.10.0     2023-10-07 [1] CRAN (R 4.3.0)\n gtable        0.3.4      2023-08-21 [1] CRAN (R 4.3.0)\n hms           1.1.3      2023-03-21 [1] CRAN (R 4.3.0)\n htmltools     0.5.7      2023-11-03 [1] CRAN (R 4.3.0)\n htmlwidgets   1.6.2      2023-03-17 [1] CRAN (R 4.3.0)\n jsonlite      1.8.7      2023-06-29 [1] CRAN (R 4.3.0)\n knitr         1.45       2023-10-30 [1] CRAN (R 4.3.0)\n lifecycle     1.0.4      2023-11-07 [1] CRAN (R 4.3.0)\n lubridate   * 1.9.3      2023-09-27 [1] CRAN (R 4.3.0)\n magrittr      2.0.3      2022-03-30 [1] CRAN (R 4.3.0)\n modeldata   * 1.2.0.9000 2023-11-13 [1] Github (tidymodels/modeldata@7ab5d8a)\n munsell       0.5.0      2018-06-12 [1] CRAN (R 4.3.0)\n pillar        1.9.0      2023-03-22 [1] CRAN (R 4.3.0)\n pkgconfig     2.0.3      2019-09-22 [1] CRAN (R 4.3.0)\n purrr       * 1.0.2      2023-08-10 [1] CRAN (R 4.3.0)\n R6            2.5.1      2021-08-19 [1] CRAN (R 4.3.0)\n readr       * 2.1.4      2023-02-10 [1] CRAN (R 4.3.0)\n rlang         1.1.2      2023-11-04 [1] CRAN (R 4.3.0)\n rmarkdown     2.25       2023-09-18 [1] CRAN (R 4.3.0)\n rstudioapi    0.15.0     2023-07-07 [1] CRAN (R 4.3.0)\n scales        1.2.1      2022-08-20 [1] CRAN (R 4.3.0)\n sessioninfo   1.2.2      2021-12-06 [1] CRAN (R 4.3.0)\n stringi       1.8.1      2023-11-13 [1] CRAN (R 4.3.0)\n stringr     * 1.5.1      2023-11-14 [1] CRAN (R 4.3.0)\n tibble      * 3.2.1      2023-03-20 [1] CRAN (R 4.3.0)\n tidyr       * 1.3.0      2023-01-24 [1] CRAN (R 4.3.0)\n tidyselect    1.2.0      2022-10-10 [1] CRAN (R 4.3.0)\n tidyverse   * 2.0.0      2023-02-22 [1] CRAN (R 4.3.0)\n timechange    0.2.0      2023-01-11 [1] CRAN (R 4.3.0)\n tzdb          0.4.0      2023-05-12 [1] CRAN (R 4.3.0)\n utf8          1.2.4      2023-10-22 [1] CRAN (R 4.3.0)\n vctrs         0.6.4      2023-10-12 [1] CRAN (R 4.3.0)\n withr         2.5.2      2023-10-30 [1] CRAN (R 4.3.0)\n xfun          0.41       2023-11-01 [1] CRAN (R 4.3.0)\n xml2          1.3.5      2023-07-06 [1] CRAN (R 4.3.0)\n yaml          2.3.7      2023-01-23 [1] CRAN (R 4.3.0)\n\n [1] /Users/max/Library/R/x86_64/4.3/library\n [2] /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library\n\n──────────────────────────────────────────────────────────────────────────────\n\n\n\n\n[✓] Checking versions of quarto binary dependencies...\n      Pandoc version 3.1.2: OK\n      Dart Sass version 1.55.0: OK\n      Deno version 1.33.2: OK\n[✓] Checking versions of quarto dependencies......OK\n[✓] Checking Quarto installation......OK\n      Version: 1.4.104\n[✓] Checking basic markdown render....OK\n[✓] Checking Python 3 installation....OK\n      Version: 3.11.4\n      Jupyter: (None)\n      Jupyter is not available in this Python installation.\n[✓] Checking R installation...........OK\n      Version: 4.3.1\n      LibPaths:\n        - /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library\n      knitr: 1.45\n      rmarkdown: 2.25\n[✓] Checking Knitr engine render......OK"
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "I have some code to make ggplot distribution plots inside a gt column (probably based off of this SO post).\nI’m getting different renderings of the tables with gt 0.9 and 0.10 (also different quarto versions). The tables are clipping off into the text:\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(gt)\n\ndata(ames, package = \"modeldata\")\n\n# Function to make statistics\nfreq &lt;- function(x, most = TRUE) {\n  xtab &lt;- sort(table(x), decreasing = most)\n  xtab &lt;- xtab[xtab &gt; 0]\n  res &lt;- names(xtab)[1]\n\n  if (res == \"N\") {\n    res &lt;- \"No\"\n  } else if (res == \"Y\") {\n    res &lt;- \"Yes\"\n  } else if (res == \"OneFam\") {\n    res &lt;- \"Single-Family Detached\"\n  } else if (res == \"TwoFmCon\") {\n    res &lt;- \"Two-Family Conversion\"\n  }\n  \n  res &lt;- paste0(res, \" (\", xtab[1], \")\")\n  gsub(\"_\", \" \", res)\n}\n\names  %&gt;%\n  select(`Building Type` = Bldg_Type, Neighborhood, Central_Air) %&gt;%\n  pivot_longer(\n    cols = c(everything()),\n    names_to = \"Variable\",\n    values_to = \"value\"\n  ) %&gt;%\n  mutate(Variable = gsub(\"_\", \" \", Variable)) %&gt;% \n  nest_by(Variable) %&gt;%\n  mutate(\n    `# Values` = length(unique(data$value)),\n    `Most Frequent` = freq(data$value),\n    `Least Frequent` = freq(data$value, FALSE),\n    plots = list(\n      ggplot(data, aes(value, fill = value)) + \n        geom_bar() +\n        theme(\n          axis.line = element_blank(),\n          axis.text.x = element_blank(),\n          axis.text.y = element_blank(),\n          axis.ticks = element_blank(),\n          axis.title.x = element_blank(),\n          axis.title.y = element_blank(),\n          legend.position = \"none\",\n          panel.background = element_blank(),\n          panel.border = element_blank(),\n          panel.grid.major = element_blank(),\n          panel.grid.minor = element_blank(),\n          plot.background = element_blank()\n        ) \n    ), \n    .keep = \"unused\"\n  ) %&gt;%\n  ungroup %&gt;%\n  mutate(distribution = NA) %&gt;%\n  {\n    dat &lt;- .\n    dat %&gt;%\n      select(-plots) %&gt;%\n      gt() %&gt;%\n      text_transform(locations = cells_body(c(distribution)),\n                     fn = function(x) {\n                       map(dat$plots, ggplot_image, height = px(30), aspect_ratio = 4)\n                     }\n      ) %&gt;% \n      tab_options(table.font.size = \"80%\")\n  }\n\n\n\n\nTable 1.1:  A summary of categorical predictors in the Ames housing data. \n  \n    \n    \n      Variable\n      # Values\n      Most Frequent\n      Least Frequent\n      distribution\n    \n  \n  \n    Building Type\n5\nSingle-Family Detached (2425)\nTwo-Family Conversion (62)\n\n    Central Air\n2\nYes (2734)\nNo (196)\n\n    Neighborhood\n28\nNorth Ames (443)\nLandmark (1)\n\n  \n  \n  \n\n\n\n\n\nHere is some text to show that it clipping into the space below the plot."
  },
  {
    "objectID": "summary.html",
    "href": "summary.html",
    "title": "2  Summary",
    "section": "",
    "text": "In summary, this book has no content whatsoever.\n\n1 + 1\n\n[1] 2"
  }
]